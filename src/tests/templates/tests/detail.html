{% extends "base.html" %}
{% block content %}

<style>
  .parent_label > label { font-weight: bold; }
</style>

<div class="w-full mx-auto md:w-4/6 mt-10">
  <h5 class="block mb-2 font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-blue-gray-900">
    {{test.title}}
    <p class="float-right" id="timer">{{test.time}}:00</p>
  </h5>
</div>

<form method="post" class="w-full border border-gray-200 rounded-lg shadow mx-auto md:w-4/6 mt-10 p-6">
  {% csrf_token %}
    {% for field in testForm %}
      <div class="mt-3 parent_label">
          {{ field.label_tag }}
          {{ field }}
      </div>
    {% endfor %}
      <div class="mt-4 parent_label h-10">
    <input
      type="submit"
      value="Odevzdat"
      class="float-right text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 focus:outline-none">

  </div>
</form>

<script>
const checkboxes = document.querySelectorAll('input[type="checkbox"]');
checkboxes.forEach(checkbox => {
  checkbox.classList.add('font-normal', 'w-4', 'h-4', 'text-blue-600', 'bg-gray-100', 'border-gray-300', 'rounded', 'focus:ring-blue-500', 'focus:ring-2');
});

const radios = document.querySelectorAll('input[type="radio"]');
radios.forEach(radio => {
  radio.classList.add('w-4', 'h-4', 'border-gray-300', 'bg-gray-100', 'focus:ring-2', 'focus:ring-blue-300');
});

const texts = document.querySelectorAll('input[type="text"]');
texts.forEach(text => {
  text.classList.add('w-full', 'text-blue-600', 'bg-gray-100', 'border-gray-300', 'rounded', 'focus:ring-blue-500', 'focus:ring-2');
});

function startTimer(duration, display) {
  let timer = duration, minutes, seconds;
  setInterval(function () {
    minutes = parseInt(timer / 60, 10);
    seconds = parseInt(timer % 60, 10);

    minutes = minutes < 10 ? "0" + minutes : minutes;
    seconds = seconds < 10 ? "0" + seconds : seconds;

    display.textContent = minutes + ":" + seconds;

    if (--timer < 0) {
      timer = duration;
    }
  }, 1000);
}

window.onload = function () {
  //var duration = 60 * {{test.time}},
  var duration = 60 * 15,
  element = document.querySelector('#timer');
  startTimer(duration, element);
};
</script>
{% endblock %}
